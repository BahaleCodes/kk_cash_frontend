{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Home/Header/Application/Application.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport classes from './Application.module.css';\nimport Input from '../../../../shared/components/UIElements/Input/Input';\nimport RangeSlider from '../../../../shared/components/UIElements/RangeSlider/RangeSlider';\nimport { useAuth } from '../../../../shared/hooks/auth-hook';\nimport { baseURL } from '../../../../URI.js';\nimport LoadingSpinner from '../../../../shared/components/UIElements/Spinner/LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = baseURL;\n\nconst Application = props => {\n  _s();\n\n  const {\n    token,\n    userId\n  } = useAuth(); //Removed the sets to get rid of the warnings\n\n  const [startDate] = useState(new Date());\n  const [applyDate] = useState(new Date());\n  const [data, setData] = useState({\n    loading: false,\n    repaymentDay: null,\n    startDate: new Date(),\n    amount: 1500,\n    duration: 30,\n    rate: 0.3,\n    amount_due: 0,\n    interest: 0,\n    showNumbers: false,\n    filled: false,\n    applied: false,\n    notify: false,\n    notice: \"\"\n  });\n\n  const handleInputChange = event => {\n    setData({ ...data,\n      notify: false,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const installment = () => {\n    let price = data.amount;\n    const intrest_rate = parseFloat(data.rate);\n    let val = parseInt(price) + parseInt(price * intrest_rate);\n    let time = parseInt(data.duration);\n    let repayDay = startDate.setDate(startDate.getDate() + time);\n\n    if (parseInt(data.amount) > 500 && parseInt(data.duration) > 5 && parseInt(data.amount) < 2001 && parseInt(data.duration) < 31) {\n      setData({ ...data,\n        amount_due: val,\n        interest: parseInt(price * intrest_rate),\n        repaymentDay: repayDay.toString(),\n        showNumbers: true\n      });\n    } else if (parseInt(data.amount) < 500) {\n      setData({\n        notify: true,\n        notice: \"Loan amount shouldn't be lower than R500\"\n      });\n    } else if (parseInt(data.duration) < 5) {\n      setData({\n        notify: true,\n        notice: \"Loan duration shouldn't be less than 5 days\"\n      });\n    } else if (parseInt(data.duration) > 30) {\n      setData({\n        notify: true,\n        notice: \"Loan duration shouldn't be longer than 30 days\"\n      });\n    } else if (parseInt(data.amount) > 2000) {\n      setData({\n        notify: true,\n        notice: \"Loan amount shouldn't be greater than R2000\"\n      });\n    } // console\n\n  };\n\n  const nextHandle = () => {\n    installment();\n  };\n\n  const loanSubmit = async e => {\n    e.preventDefault();\n    setData({\n      loading: true\n    });\n    await axios.post(`${URL}loan/create/${userId}`, {\n      \"amount\": data.amount,\n      \"duration\": data.duration,\n      \"repay_date\": startDate.toString(),\n      \"interest_rate\": data.rate,\n      \"apply_date\": applyDate.toString()\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(response => response.json()).then(() => {\n      setData({\n        applied: true,\n        loading: false\n      });\n    }).catch(error => {\n      setData({\n        loading: false\n      });\n    });\n  };\n\n  const appliedDiv = /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.done,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"body-padding text-center\",\n        style: {\n          margin: \"10rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Your loan application was successfully saved.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Please keep an eye open for any updates from our side regarding the loan.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"If the loan is approved and your information is successfully authenticated, the money will be sent into your account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n\n  const loadingDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n\n  const applicationDiv = /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.row,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"How Much would you like to loan (ZAR)?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"Number\",\n          value: data.amount,\n          onChange: handleInputChange,\n          name: \"amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-12\",\n      children: /*#__PURE__*/_jsxDEV(RangeSlider, {\n        min: 0,\n        max: 2000,\n        step: 5,\n        name: \"amount\",\n        onChange: handleInputChange,\n        volume: data.amount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), data.notify ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: data.notice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 23\n    }, this) : \"\", data.showNumbers ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setData({\n          showNumbers: false\n        }),\n        className: \"btn-custom\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }, this), props.profile ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your loan application has been sent for review.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Please keep your eyes open for further confirmation on the results of your loan application\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Once approved, you will be notified with an Email and shortly, your R\", data.amount, \" will be paid into your bank account.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-custom\",\n          onClick: loanSubmit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: '/loan',\n          state: {\n            amount: data.amount,\n            amount_due: data.amount_due,\n            duration: data.duration,\n            amount: data.amount,\n            interest: data.interest,\n            rate: data.rate,\n            repaymentDay: startDate.toDateString()\n          }\n        },\n        className: \"btn-custom\",\n        children: \"Continue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.numbers,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.col,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [\"R\", data.amount_due]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Amount Due\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.col,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: startDate.toDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Repay Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-12 body-padding\",\n      children: [data.duration !== null && data.duration !== 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: nextHandle,\n        className: \"btn-custom\",\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 35\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please enter desired amount and duration to pay loan.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.cnt_body,\n    children: [!data.applied && !data.loading && applicationDiv, data.applied && appliedDiv, data.loading && loadingDiv]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Application, \"7+RpdZiu4w2+MdUKBiPUun/K4fc=\", false, function () {\n  return [useAuth];\n});\n\n_c = Application;\nexport default Application;\n\nvar _c;\n\n$RefreshReg$(_c, \"Application\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Home/Header/Application/Application.js"],"names":["React","useState","Link","axios","classes","Input","RangeSlider","useAuth","baseURL","LoadingSpinner","URL","Application","props","token","userId","startDate","Date","applyDate","data","setData","loading","repaymentDay","amount","duration","rate","amount_due","interest","showNumbers","filled","applied","notify","notice","handleInputChange","event","target","name","value","installment","price","intrest_rate","parseFloat","val","parseInt","time","repayDay","setDate","getDate","toString","nextHandle","loanSubmit","e","preventDefault","post","headers","then","response","json","catch","error","appliedDiv","done","margin","loadingDiv","applicationDiv","row","profile","pathname","state","toDateString","numbers","col","cnt_body"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nimport classes from './Application.module.css';\nimport Input from '../../../../shared/components/UIElements/Input/Input';\nimport RangeSlider from '../../../../shared/components/UIElements/RangeSlider/RangeSlider';\nimport { useAuth } from '../../../../shared/hooks/auth-hook';\nimport { baseURL } from '../../../../URI.js';\nimport LoadingSpinner from '../../../../shared/components/UIElements/Spinner/LoadingSpinner';\n\nconst URL = baseURL;\n\nconst Application = (props) => {\n    const { token, userId } = useAuth();\n    //Removed the sets to get rid of the warnings\n    const [startDate ] = useState(new Date());\n    const [applyDate ] = useState(new Date());\n    const [data, setData] = useState({\n        loading: false,\n        repaymentDay: null,\n        startDate: new Date(),\n        amount: 1500,\n        duration: 30,\n        rate: 0.3,\n        amount_due: 0,\n        interest: 0,\n        showNumbers: false,\n        filled: false,\n        applied: false,\n        notify: false,\n        notice: \"\"\n    })\n    const handleInputChange = event => {\n        setData({\n            ...data,\n            notify: false,\n            [event.target.name]: event.target.value\n        });\n    };\n    const installment = () => {\n        let price = data.amount;\n        const intrest_rate = parseFloat(data.rate);\n        let val = (parseInt(price) + parseInt(price * intrest_rate));\n        let time = parseInt(data.duration);\n        let repayDay = startDate.setDate(startDate.getDate() + (time));\n        if ((parseInt(data.amount)) > 500 && (parseInt(data.duration)) > 5 && (parseInt(data.amount)) < 2001 && (parseInt(data.duration)) < 31) {\n            setData({\n                ...data,\n                amount_due: val,\n                interest: parseInt(price * intrest_rate),\n                repaymentDay: repayDay.toString(),\n                showNumbers: true\n            });\n        }\n        else if ((parseInt(data.amount)) < 500) {\n            setData({\n                notify: true,\n                notice: \"Loan amount shouldn't be lower than R500\"\n            })\n        }\n        else if ((parseInt(data.duration)) < 5) {\n            setData({\n                notify: true,\n                notice: \"Loan duration shouldn't be less than 5 days\"\n            })\n        }\n        else if ((parseInt(data.duration)) > 30) {\n            setData({\n                notify: true,\n                notice: \"Loan duration shouldn't be longer than 30 days\"\n            })\n        }\n        else if ((parseInt(data.amount)) > 2000) {\n            setData({\n                notify: true,\n                notice: \"Loan amount shouldn't be greater than R2000\"\n            })\n        }\n\n        // console\n    }\n    const nextHandle = () => {\n        installment();\n    }\n    const loanSubmit = async (e) => {\n        e.preventDefault();\n        setData({\n            loading: true\n        });\n        await axios\n            .post(`${URL}loan/create/${userId}`,\n                {\n                    \"amount\": data.amount,\n                    \"duration\": data.duration,\n                    \"repay_date\": startDate.toString(),\n                    \"interest_rate\": data.rate,\n                    \"apply_date\": applyDate.toString()\n                },\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${token}`\n                    }\n                }\n            )\n            .then(response => response.json()\n            )\n            .then(() => {\n                setData({\n                    applied: true,\n                    loading: false\n                });\n            })\n            .catch(error => {\n                setData({\n                    loading: false\n                });\n            });\n    };\n    const appliedDiv = (\n        <React.Fragment>\n            <div className={classes.done}>\n                <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n                    <h1>Your loan application was successfully saved.</h1>\n                    <h1>Please keep an eye open for any updates from our side regarding the loan.</h1>\n                    <h1>If the loan is approved and your information is successfully authenticated, the money will be sent into your account.</h1>\n                </div>\n            </div>\n        </React.Fragment>\n    )\n    const loadingDiv = (\n        <div className='container' style={{\n            margin: \"10rem\"\n        }}>\n            <LoadingSpinner />\n        </div>\n    )\n    const applicationDiv = (\n        <React.Fragment>\n            <div className={classes.row}>\n                <div className='col-md-12'>\n                    <h4>How Much would you like to loan (ZAR)?</h4>\n                    <Input type={\"Number\"} value={data.amount} onChange={handleInputChange} name={\"amount\"} />\n                </div>\n                {/* <div className='col-md-3'>\n                                            <label>How Long (Days)?</label>\n                                            <Input type={\"Number\"} value={data.duration} onChange={handleInputChange} name={\"duration\"} />\n                                        </div> */}\n            </div>\n            <div className='col-md-12'>\n                <RangeSlider min={0} max={2000} step={5} name={\"amount\"} onChange={handleInputChange} volume={data.amount} />\n                {/* <RangeSlider min={0} max={30} step={1} name={\"duration\"} onChange={handleInputChange} volume={data.duration} /> */}\n            </div>\n            {\n                data.notify\n                    ? <div>\n                        <h5>{data.notice}</h5>\n                    </div>\n                    : \"\"\n            }\n            {\n                data.showNumbers\n                    ? <div>\n                        <button onClick={() => (\n                            setData({\n                                showNumbers: false\n                            })\n                        )} className='btn-custom'>Cancel</button>\n                        <br />\n                        <br />\n                        {\n                            props.profile\n                                ? <div>\n                                    <h3>Your loan application has been sent for review.</h3>\n                                    <h4>Please keep your eyes open for further confirmation on the results of your loan application</h4>\n                                    <h4>Once approved, you will be notified with an Email and shortly, your R{data.amount} will be paid into your bank account.</h4>\n                                    <button className='btn-custom' onClick={loanSubmit}>\n                                        Submit\n                                    </button>\n                                </div>\n                                : <Link to={{\n                                    pathname: '/loan',\n                                    state: {\n                                        amount: data.amount,\n                                        amount_due: data.amount_due,\n                                        duration: data.duration,\n                                        amount: data.amount,\n                                        interest: data.interest,\n                                        rate: data.rate,\n                                        repaymentDay: startDate.toDateString(),\n                                    }\n                                }} className='btn-custom'>Continue</Link>\n                        }\n                        <div className={classes.numbers}>\n                            <div className={classes.col}>\n                                <h4>R{data.amount_due}</h4>\n                                <h5>Amount Due</h5>\n                            </div>\n                            <div className={classes.col}>\n                                <h4>{startDate.toDateString()}</h4>\n                                <h5>Repay Date</h5>\n                            </div>\n                        </div>\n                    </div>\n\n                    : <div className='col-md-12 body-padding'>\n                        {\n                            data.duration !== null && data.duration !== 0\n                                ? <button onClick={nextHandle} className='btn-custom'>Next</button>\n                                : \"\"\n                        }\n\n                        <p>Please enter desired amount and duration to pay loan.</p>\n                    </div>\n            }\n        </React.Fragment>\n    )\n\n    return (\n        <div className={classes.cnt_body}>\n            { !data.applied && !data.loading && applicationDiv }\n            { data.applied && appliedDiv }\n            { data.loading && loadingDiv }\n        </div>\n    )\n}\n\nexport default Application;"]},"metadata":{},"sourceType":"module"}