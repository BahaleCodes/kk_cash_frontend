{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Apply.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport LoadingSpinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\nimport Card from \"../../../shared/components/UIElements/Card/Card\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = baseURL;\n\nconst Apply = props => {\n  _s();\n\n  const auth = useContext(AuthContext);\n  const {\n    state\n  } = props.location;\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState({\n    errorMessage: \"\"\n  });\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    await axios.post(`${URL}loan/create/${auth.userId}`, {\n      \"amount\": 900,\n      \"duration\": \"20 days\",\n      \"repay_date\": \"21 January 2022\",\n      \"interest_rate\": 0.12\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${auth.token}`\n      }\n    }).then(response => {\n      setLoading(false);\n      setDone(true);\n      response.json();\n    }).catch(error => {\n      setLoading(false);\n\n      if (error.response) {\n        const str = error.response.data.error;\n        const errMes = str.split(':').pop();\n        setError(true);\n        setData({ ...data,\n          errorMessage: errMes\n        });\n      } else {}\n    });\n  };\n\n  const errorDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: data.errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `/loan-apply/${auth.userId}`,\n      className: \"btn-custom\",\n      children: \"Try again \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/auth\",\n      className: \"btn-custom\",\n      children: \"Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n\n  const loadingDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n\n  const doneDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your loan application was successfully saved.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Please keep an eye open for any updates from our side regarding the loan.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"If the loan is approved and your information is successfully authenticated, the money will be sent into your account.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: `/${auth.userId}/profile`,\n        state: {\n          amount_due: state.amount_due,\n          duration: state.duration,\n          amount: state.amount,\n          interest: state.interest,\n          rate: state.rate,\n          repaymentDay: state.repaymentDay\n        }\n      },\n      className: 'btn-custom',\n      children: \"Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n\n  const applyDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Application Complete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n      width: \"100%\",\n      step: \"7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"We appreciate you patience, you information has been successfully saved and store into our database\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Please confirm for us one last time the amount and the duration of your loan.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Loan information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Loan Duration: \", state.duration, \" days\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Repayment Date: \", state.repaymentDay]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Amount Due: R\", state.amount_due]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      className: \"btn-custom\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [!loading && !done && !error && applyDiv, loading && loadingDiv, done && doneDiv, error && errorDiv]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Apply, \"mwDHY9JgPgGYjwipwKcecQtAWBU=\");\n\n_c = Apply;\nexport default Apply;\n\nvar _c;\n\n$RefreshReg$(_c, \"Apply\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Apply.js"],"names":["React","useContext","useState","axios","Link","ProgressBar","LoadingSpinner","baseURL","AuthContext","Card","URL","Apply","props","auth","state","location","loading","setLoading","done","setDone","error","setError","data","setData","errorMessage","handleSubmit","e","preventDefault","post","userId","headers","token","then","response","json","catch","str","errMes","split","pop","errorDiv","margin","loadingDiv","doneDiv","pathname","amount_due","duration","amount","interest","rate","repaymentDay","applyDiv"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport LoadingSpinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\n\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\nimport Card from \"../../../shared/components/UIElements/Card/Card\";\n\nconst URL = baseURL;\n\nconst Apply = (props) => {\n    const auth = useContext(AuthContext);\n    const { state } = props.location;\n    const [loading, setLoading] = useState(false);\n    const [done, setDone] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState({\n\n        errorMessage: \"\"\n    });\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        await axios\n            .post(`${URL}loan/create/${auth.userId}`,\n                {\n                    \"amount\": 900,\n                    \"duration\": \"20 days\",\n                    \"repay_date\": \"21 January 2022\",\n                    \"interest_rate\": 0.12\n                },\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${auth.token}`\n                    }\n                }\n            )\n            .then(response => {\n                setLoading(false);\n                setDone(true);\n                response.json();\n            })\n            .catch(error => {\n                setLoading(false);\n                if (error.response) {\n                    const str = error.response.data.error;\n                    const errMes = str.split(':').pop();\n                    setError(true);\n                    setData({\n                        ...data,\n                        errorMessage: errMes\n                    });\n                }\n                else {\n\n                }\n            })\n    }\n\n\n    const errorDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Error</h1>\n            <h2>{data.errorMessage}</h2>\n            <a href={`/loan-apply/${auth.userId}`} className='btn-custom' >Try again </a>\n            <a href='/auth' className=\"btn-custom\" >Log in</a>\n        </div>\n    );\n    const loadingDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <LoadingSpinner />\n        </div>\n    );\n    const doneDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Your loan application was successfully saved.</h1>\n            <h1>Please keep an eye open for any updates from our side regarding the loan.</h1>\n            <h1>If the loan is approved and your information is successfully authenticated, the money will be sent into your account.</h1>\n            <Link to={{\n                pathname: `/${auth.userId}/profile`,\n                state: {\n                    amount_due: state.amount_due,\n                    duration: state.duration,\n                    amount: state.amount,\n                    interest: state.interest,\n                    rate: state.rate,\n                    repaymentDay: state.repaymentDay\n                }\n            }} className={'btn-custom'}>Continue</Link>\n        </div>\n    );\n    const applyDiv = (\n        <div className='body-padding text-center'>\n            <h2>Application Complete</h2>\n            <ProgressBar width='100%' step=\"7\" />\n            <h4>We appreciate you patience, you information has been successfully saved and store into our database</h4>\n            <h5>Please confirm for us one last time the amount and the duration of your loan.</h5>\n            <Card >\n                <h3>Loan information</h3>\n                <h5>Loan Duration: {state.duration} days</h5>\n                <h5>Repayment Date: {state.repaymentDay}</h5>\n                <h5>Amount Due: R{state.amount_due}</h5>\n            </Card>\n            <button onClick={handleSubmit} className='btn-custom'>Submit</button>\n        </div>\n    )\n\n    return (\n        <div className=\"container\">\n            {!loading && !done && !error && applyDiv}\n            {loading && loadingDiv}\n            {done && doneDiv}\n            {error && errorDiv}\n        </div>\n    )\n}\n\nexport default Apply;"]},"metadata":{},"sourceType":"module"}