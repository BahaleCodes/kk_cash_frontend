{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Address.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"../../../shared/components/UIElements/Input/Input\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport SelectBox from \"../../../shared/components/UIElements/SelectBox/SelectBox\";\nimport Spinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\nimport { FetchhAddress } from \"../../../api/address\";\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = baseURL;\n\nconst Address = props => {\n  _s();\n\n  const {\n    state\n  } = props.location;\n  const auth = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState({\n    street_name: \"\",\n    suburb: \"\",\n    city: \"\",\n    province: \"\",\n    postal_code: \"\",\n    errorMessage: \"\"\n  });\n\n  const handleInputChange = event => {\n    setData({ ...data,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    FetchhAddress({\n      \"street\": data.street_name,\n      \"suburb\": data.suburb,\n      \"city\": data.city,\n      \"province\": data.province,\n      \"postal_code\": data.postal_code\n    });\n    await axios.post(`${URL}address/create/${auth.userId}`, {\n      \"street\": data.street_name,\n      \"suburb\": data.suburb,\n      \"city\": data.city,\n      \"province\": data.province,\n      \"postal_code\": data.postal_code\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${auth.token}`\n      }\n    }).then(response => {\n      setLoading(false);\n      setDone(true);\n      console.log(response.data); // await axios\n      //     .put(`${}`)\n    }).catch(error => {\n      setLoading(false);\n\n      if (error.response) {\n        const str = error.response.data.error;\n        const errMes = str.split(':').pop();\n        setError(true);\n        setData({ ...data,\n          errorMessage: errMes\n        });\n      } else {}\n    });\n  };\n\n  const errorDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: data.errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `/loan-address/${auth.userId}`,\n      className: \"btn-custom\",\n      children: \"Try again \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/auth\",\n      className: \"btn-custom\",\n      children: \"Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n\n  const loadingDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n\n  const doneDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your information was successfully saved, please continue on to the next section\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: `/loan-employment/${auth.userId}`,\n        state: {\n          amount_due: state.amount_due,\n          duration: state.duration,\n          amount: state.amount,\n          interest: state.interest,\n          rate: state.rate,\n          repaymentDay: state.repaymentDay\n        }\n      },\n      className: 'btn-custom',\n      children: \"Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n\n  const addressDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Current Address\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"We appreciate you trusting us with your personal information.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Please fill in the following form with your information.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Loan Duration: \", state.duration, \" days\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Repayment Date: \", state.repaymentDay]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Amount Due: R\", state.amount_due]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n      width: \"25%\",\n      step: \"3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.street_name,\n      name: \"street_name\",\n      placeholder: \"Street Name\",\n      type: \"Text\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.suburb,\n      name: \"suburb\",\n      placeholder: \"Suburb\",\n      type: \"Text\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.city,\n      name: \"city\",\n      placeholder: \"City\",\n      type: \"Text\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SelectBox, {\n      value: data.province,\n      name: \"province\",\n      placeholder: \"Province\",\n      onChange: handleInputChange,\n      questions: [\"Eastern Cape\", \"Free State\", \"Gauteng\", \"KwaZulu-Natal\", \"Limpopo\", \"Mpumalanga\", \"Northern Cape\", \"North West\", \"Western Cape\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.postal_code,\n      name: \"postal_code\",\n      placeholder: \"Postal Code\",\n      type: \"Number\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btns\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        className: \"btn-custom-neg\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        className: \"btn-custom\",\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: \"11rem\"\n    },\n    className: \"container\",\n    children: [!loading && !done && !error && addressDiv, loading && loadingDiv, done && doneDiv, error && errorDiv]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Address, \"R2dBzjsIBgQIdMiG2t5tztroaYs=\");\n\n_c = Address;\nexport default Address;\n\nvar _c;\n\n$RefreshReg$(_c, \"Address\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Address.js"],"names":["React","useContext","useState","axios","Link","Input","ProgressBar","SelectBox","Spinner","FetchhAddress","baseURL","AuthContext","URL","Address","props","state","location","auth","loading","setLoading","done","setDone","error","setError","data","setData","street_name","suburb","city","province","postal_code","errorMessage","handleInputChange","event","target","name","value","handleSubmit","e","preventDefault","post","userId","headers","token","then","response","console","log","catch","str","errMes","split","pop","errorDiv","margin","loadingDiv","doneDiv","pathname","amount_due","duration","amount","interest","rate","repaymentDay","addressDiv","marginTop"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport Input from \"../../../shared/components/UIElements/Input/Input\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport SelectBox from \"../../../shared/components/UIElements/SelectBox/SelectBox\";\nimport Spinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\nimport { FetchhAddress } from \"../../../api/address\";\n\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\n\nconst URL = baseURL;\n\nconst Address = (props) => {\n    const { state } = props.location;\n    const auth = useContext(AuthContext);\n    const [loading, setLoading] = useState(false);\n    const [done, setDone] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState({\n        street_name: \"\",\n        suburb: \"\",\n        city: \"\",\n        province: \"\",\n        postal_code: \"\",\n        errorMessage: \"\"\n    });\n    const handleInputChange = event => {\n        setData({\n            ...data,\n            [event.target.name]: event.target.value\n        });\n    };\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        FetchhAddress({\n            \"street\": data.street_name,\n            \"suburb\": data.suburb,\n            \"city\": data.city,\n            \"province\": data.province,\n            \"postal_code\": data.postal_code\n        })\n        await axios\n            .post(`${URL}address/create/${auth.userId}`,\n                {\n                    \"street\": data.street_name,\n                    \"suburb\": data.suburb,\n                    \"city\": data.city,\n                    \"province\": data.province,\n                    \"postal_code\": data.postal_code\n                },\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${auth.token}`\n                    }\n                }\n            )\n            .then(response => {\n                setLoading(false);\n                setDone(true);\n                console.log(response.data);\n                // await axios\n                //     .put(`${}`)\n            })\n            .catch(error => {\n                setLoading(false);\n                if (error.response) {\n                    const str = error.response.data.error;\n                    const errMes = str.split(':').pop();\n                    setError(true);\n                    setData({\n                        ...data,\n                        errorMessage: errMes\n                    });\n                }\n                else {\n\n                }\n            })\n    }\n\n    const errorDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Error</h1>\n            <h2>{data.errorMessage}</h2>\n            <a href={`/loan-address/${auth.userId}`} className='btn-custom' >Try again </a>\n            <a href='/auth' className=\"btn-custom\" >Log in</a>\n        </div>\n    );\n    const loadingDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <Spinner />\n        </div>\n    );\n    const doneDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Your information was successfully saved, please continue on to the next section</h1>\n            <Link to={{\n                pathname: `/loan-employment/${auth.userId}`,\n                state: {\n                    amount_due: state.amount_due,\n                    duration: state.duration,\n                    amount: state.amount,\n                    interest: state.interest,\n                    rate: state.rate,\n                    repaymentDay: state.repaymentDay\n                }\n            }} className={'btn-custom'}>Continue</Link>\n        </div>\n    );\n    const addressDiv = (\n        <div className=\"body-padding\">\n            <h2>Current Address</h2>\n            <h4>We appreciate you trusting us with your personal information.</h4>\n            <h3>Please fill in the following form with your information.</h3>\n            <h3>Loan Duration: {state.duration} days</h3>\n            <h3>Repayment Date: {state.repaymentDay}</h3>\n            <h3>Amount Due: R{state.amount_due}</h3>\n            <ProgressBar width='25%' step={\"3\"} />\n            <Input value={data.street_name} name='street_name' placeholder='Street Name' type='Text' onChange={handleInputChange} />\n            <Input value={data.suburb} name='suburb' placeholder='Suburb' type='Text' onChange={handleInputChange} />\n            <Input value={data.city} name='city' placeholder='City' type='Text' onChange={handleInputChange} />\n            <SelectBox value={data.province} name='province' placeholder='Province' onChange={handleInputChange} questions={[\n                \"Eastern Cape\",\n                \"Free State\",\n                \"Gauteng\",\n                \"KwaZulu-Natal\",\n                \"Limpopo\",\n                \"Mpumalanga\",\n                \"Northern Cape\",\n                \"North West\",\n                \"Western Cape\"\n            ]} />\n            <Input value={data.postal_code} name='postal_code' placeholder='Postal Code' type='Number' onChange={handleInputChange} />\n\n            <br />\n            <div className='btns'>\n                <a href='/' className='btn-custom-neg'>Cancel</a>\n                <button onClick={handleSubmit} className='btn-custom'>Next</button>\n            </div>\n            <br />\n        </div>\n    )\n    return (\n        <div style={{\n            marginTop: \"11rem\"\n        }} className='container'>\n            {!loading && !done && !error && addressDiv}\n            {loading && loadingDiv}\n            {done && doneDiv}\n            {error && errorDiv}\n        </div>\n    )\n}\n\nexport default Address;"]},"metadata":{},"sourceType":"module"}