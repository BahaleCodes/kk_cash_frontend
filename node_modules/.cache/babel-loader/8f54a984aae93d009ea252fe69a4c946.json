{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Auth/Auth.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport Card from '../../shared/components/UIElements/Card/Card';\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/Spinner/LoadingSpinner';\nimport { VALIDATOR_EMAIL, VALIDATOR_MINLENGTH, VALIDATOR_REQUIRE } from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport './Auth.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Auth = () => {\n  _s();\n\n  const auth = useContext(AuthContext);\n  const [isLoginMode, setIsLoginMode] = useState(true);\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient(); // const [data, setData] = useState({\n  // \terror: false,\n  // \terrorMessage: \"\"\n  // })\n\n  const [formState, inputHandler, setFormData] = useForm({\n    email: {\n      value: '',\n      isValid: false\n    },\n    password: {\n      value: '',\n      isValid: false\n    }\n  }, false);\n\n  const switchModeHandler = () => {\n    if (!isLoginMode) {\n      setFormData({ ...formState.Input,\n        first_name: undefined,\n        last_name: undefined,\n        email: undefined,\n        phone_number: undefined,\n        idNum: undefined,\n        home_language: undefined,\n        marital_status: undefined,\n        home_status: undefined,\n        dependents: undefined,\n        password: undefined\n      }, formState.inputs.email.isValid && formState.inputs.password.isValid);\n    } else {\n      setFormData({ ...formState.inputs,\n        first_name: {\n          value: '',\n          isValid: false\n        },\n        last_name: {\n          value: '',\n          isValid: false\n        },\n        email: {\n          value: '',\n          isValid: false\n        },\n        phone_number: {\n          value: '',\n          isValid: false\n        },\n        idNum: {\n          value: '',\n          isValid: false\n        },\n        home_language: {\n          value: '',\n          isValid: false\n        },\n        marital_status: {\n          value: '',\n          isValid: false\n        },\n        home_status: {\n          value: '',\n          isValid: false\n        },\n        dependents: {\n          value: '',\n          isValid: false\n        },\n        password: {\n          value: '',\n          isValid: false\n        }\n      }, false);\n    }\n\n    setIsLoginMode(prevMode => !prevMode);\n  };\n\n  const authSubmitHandler = async event => {\n    event.preventDefault();\n\n    if (isLoginMode) {\n      try {\n        const responseData = await sendRequest('http://localhost:8000/api/signin', 'POST', JSON.stringify({\n          email: formState.inputs.email.value,\n          password: formState.inputs.password.value\n        }), {\n          'Content-Type': 'application/json'\n        });\n        auth.login(responseData.userId, responseData.token);\n      } catch (err) {\n        alert(\"Failed to Login\");\n      }\n    } else {\n      console.log(formState.inputs.first_name.value);\n\n      try {\n        const responseData = await sendRequest('http://localhost:8000/api/signup', 'POST', JSON.stringify({\n          first_name: formState.inputs.first_name.value,\n          last_name: formState.inputs.last_name.value,\n          email: formState.inputs.email.value,\n          phone_number: formState.inputs.phone_number.value,\n          idNum: formState.inputs.idNum.value,\n          home_language: formState.inputs.home_language.value,\n          marital_status: formState.inputs.marital_status.value,\n          home_status: formState.inputs.home_status.value,\n          dependents: formState.inputs.dependents.value,\n          password: formState.inputs.password.value\n        }), {\n          'Content-Type': 'application/json'\n        }).then();\n        auth.login(responseData.userId, responseData.token);\n      } catch (err) {\n        alert(`Failed to Sign up ${err.response}`);\n        console.log(err);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      error: error,\n      onClear: clearError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"authentication\",\n      children: [isLoading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n        asOverlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login Required\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: authSubmitHandler,\n        children: [!isLoginMode && /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"first_name\",\n            type: \"text\",\n            label: \"Your First Name\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter your valid First name.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"last_name\",\n            type: \"text\",\n            label: \"Your Last Name\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter your valid Last name.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"phone_number\",\n            type: \"number\",\n            label: \"Your Cell Phone number\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter you valid South African cell phone number.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"idNum\",\n            type: \"text\",\n            label: \"Your South African ID number\",\n            validators: [VALIDATOR_MINLENGTH(13)],\n            errorText: \"Please enter you valid South African ID Number\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"home_language\",\n            type: \"text\",\n            label: \"Your Home Language\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter you home language.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"marital_status\",\n            type: \"text\",\n            label: \"Your Marital Status\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter marital status.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"home_status\",\n            type: \"text\",\n            label: \"Your Home Status\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter Home status.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            element: \"input\",\n            id: \"dependents\",\n            type: \"text\",\n            label: \"Your number of dependents\",\n            validators: [VALIDATOR_REQUIRE()],\n            errorText: \"Please enter your number of dependents.\",\n            onInput: inputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          element: \"input\",\n          id: \"email\",\n          type: \"email\",\n          label: \"E-Mail\",\n          validators: [VALIDATOR_EMAIL()],\n          errorText: \"Please enter a valid email address.\",\n          onInput: inputHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          element: \"input\",\n          id: \"password\",\n          type: \"password\",\n          label: \"Password\",\n          validators: [VALIDATOR_MINLENGTH(6)],\n          errorText: \"Please enter a valid password, at least 6 characters.\",\n          onInput: inputHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          disabled: !formState.isValid,\n          children: isLoginMode ? 'LOGIN' : 'SIGNUP'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        inverse: true,\n        onClick: switchModeHandler,\n        children: [\"SWITCH TO \", isLoginMode ? 'SIGNUP' : 'LOGIN']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Auth, \"/cPEAoj/5chXdaORvL/R/PtTN4g=\", false, function () {\n  return [useHttpClient, useForm];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Auth/Auth.js"],"names":["React","useState","useContext","Card","Input","Button","ErrorModal","LoadingSpinner","VALIDATOR_EMAIL","VALIDATOR_MINLENGTH","VALIDATOR_REQUIRE","useForm","useHttpClient","AuthContext","Auth","auth","isLoginMode","setIsLoginMode","isLoading","error","sendRequest","clearError","formState","inputHandler","setFormData","email","value","isValid","password","switchModeHandler","first_name","undefined","last_name","phone_number","idNum","home_language","marital_status","home_status","dependents","inputs","prevMode","authSubmitHandler","event","preventDefault","responseData","JSON","stringify","login","userId","token","err","alert","console","log","then","response"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\n\nimport Card from '../../shared/components/UIElements/Card/Card';\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/Spinner/LoadingSpinner';\nimport {\n\tVALIDATOR_EMAIL,\n\tVALIDATOR_MINLENGTH,\n\tVALIDATOR_REQUIRE\n} from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport './Auth.css';\n\nconst Auth = () => {\n\tconst auth = useContext(AuthContext);\n\tconst [isLoginMode, setIsLoginMode] = useState(true);\n\tconst { isLoading, error, sendRequest, clearError } = useHttpClient();\n\t// const [data, setData] = useState({\n\t// \terror: false,\n\t// \terrorMessage: \"\"\n\t// })\n\tconst [formState, inputHandler, setFormData] = useForm(\n\t\t{\n\t\t\temail: {\n\t\t\t\tvalue: '',\n\t\t\t\tisValid: false\n\t\t\t},\n\t\t\tpassword: {\n\t\t\t\tvalue: '',\n\t\t\t\tisValid: false\n\t\t\t}\n\t\t},\n\t\tfalse\n\t);\n\n\tconst switchModeHandler = () => {\n\t\tif (!isLoginMode) {\n\t\t\tsetFormData(\n\t\t\t\t{\n\t\t\t\t\t...formState.Input,\n\t\t\t\t\tfirst_name: undefined,\n\t\t\t\t\tlast_name: undefined,\n\t\t\t\t\temail: undefined,\n\t\t\t\t\tphone_number: undefined,\n\t\t\t\t\tidNum: undefined,\n\t\t\t\t\thome_language: undefined,\n\t\t\t\t\tmarital_status: undefined,\n\t\t\t\t\thome_status: undefined,\n\t\t\t\t\tdependents: undefined,\n\t\t\t\t\tpassword: undefined\n\t\t\t\t},\n\t\t\t\tformState.inputs.email.isValid && formState.inputs.password.isValid\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tsetFormData(\n\t\t\t\t{\n\t\t\t\t\t...formState.inputs,\n\t\t\t\t\tfirst_name: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\tlast_name: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\temail: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\tphone_number: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\tidNum: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\thome_language: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\tmarital_status: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\thome_status: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\tdependents: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t},\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tisValid: false\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\t\tsetIsLoginMode(prevMode => !prevMode);\n\t};\n\n\tconst authSubmitHandler = async event => {\n\t\tevent.preventDefault();\n\t\tif (isLoginMode) {\n\t\t\ttry {\n\t\t\t\tconst responseData = await sendRequest(\n\t\t\t\t\t'http://localhost:8000/api/signin',\n\t\t\t\t\t'POST',\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\temail: formState.inputs.email.value,\n\t\t\t\t\t\tpassword: formState.inputs.password.value\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tauth.login(responseData.userId, responseData.token);\n\t\t\t} catch (err) {\n\t\t\t\talert(\"Failed to Login\")\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(formState.inputs.first_name.value);\n\t\t\ttry {\n\t\t\t\tconst responseData = await sendRequest(\n\t\t\t\t\t'http://localhost:8000/api/signup',\n\t\t\t\t\t'POST',\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\tfirst_name: formState.inputs.first_name.value,\n\t\t\t\t\t\tlast_name: formState.inputs.last_name.value,\n\t\t\t\t\t\temail: formState.inputs.email.value,\n\t\t\t\t\t\tphone_number: formState.inputs.phone_number.value,\n\t\t\t\t\t\tidNum: formState.inputs.idNum.value,\n\t\t\t\t\t\thome_language: formState.inputs.home_language.value,\n\t\t\t\t\t\tmarital_status: formState.inputs.marital_status.value,\n\t\t\t\t\t\thome_status: formState.inputs.home_status.value,\n\t\t\t\t\t\tdependents: formState.inputs.dependents.value,\n\t\t\t\t\t\tpassword: formState.inputs.password.value\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t).then(\n\n\t\t\t\t);\n\t\t\t\tauth.login(responseData.userId, responseData.token);\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\talert(`Failed to Sign up ${err.response}`);\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<ErrorModal error={error} onClear={clearError} />\n\t\t\t<Card className=\"authentication\">\n\t\t\t\t{isLoading && <LoadingSpinner asOverlay />}\n\t\t\t\t<h2>Login Required</h2>\n\t\t\t\t<hr />\n\t\t\t\t<form onSubmit={authSubmitHandler}>\n\t\t\t\t\t{!isLoginMode && (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"first_name\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your First Name\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter your valid First name.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"last_name\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your Last Name\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter your valid Last name.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"phone_number\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tlabel=\"Your Cell Phone number\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter you valid South African cell phone number.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"idNum\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your South African ID number\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_MINLENGTH(13)]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter you valid South African ID Number\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"home_language\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your Home Language\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter you home language.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"marital_status\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your Marital Status\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter marital status.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"home_status\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your Home Status\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter Home status.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\t\t\tid=\"dependents\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel=\"Your number of dependents\"\n\t\t\t\t\t\t\t\tvalidators={[VALIDATOR_REQUIRE()]}\n\t\t\t\t\t\t\t\terrorText=\"Please enter your number of dependents.\"\n\t\t\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t)}\n\t\t\t\t\t<Input\n\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tlabel=\"E-Mail\"\n\t\t\t\t\t\tvalidators={[VALIDATOR_EMAIL()]}\n\t\t\t\t\t\terrorText=\"Please enter a valid email address.\"\n\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t/>\n\t\t\t\t\t<Input\n\t\t\t\t\t\telement=\"input\"\n\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\tvalidators={[VALIDATOR_MINLENGTH(6)]}\n\t\t\t\t\t\terrorText=\"Please enter a valid password, at least 6 characters.\"\n\t\t\t\t\t\tonInput={inputHandler}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type=\"submit\" disabled={!formState.isValid}>\n\t\t\t\t\t\t{isLoginMode ? 'LOGIN' : 'SIGNUP'}\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t<Button inverse onClick={switchModeHandler}>\n\t\t\t\t\tSWITCH TO {isLoginMode ? 'SIGNUP' : 'LOGIN'}\n\t\t\t\t</Button>\n\t\t\t</Card>\n\t\t</React.Fragment>\n\t);\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}