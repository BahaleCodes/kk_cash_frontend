{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Home/Header/Application/Application.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport classes from './Application.module.css';\nimport Input from '../../../../shared/components/UIElements/Input/Input';\nimport RangeSlider from '../../../../shared/components/UIElements/RangeSlider/RangeSlider';\nimport { useAuth } from '../../../../shared/hooks/auth-hook';\nimport { baseURL } from '../../../../URI.js';\nimport LoadingSpinner from '../../../../shared/components/UIElements/Spinner/LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = baseURL;\n\nconst Application = props => {\n  _s();\n\n  const {\n    token,\n    userId\n  } = useAuth();\n  const [startDate, setStartDate] = useState(new Date());\n  const [applyDate, setApplyDate] = useState(new Date());\n  const [data, setData] = useState({\n    loading: false,\n    repaymentDay: null,\n    startDate: new Date(),\n    amount: 1500,\n    duration: 14,\n    rate: 0.1,\n    amount_due: 0,\n    interest: 0,\n    showNumbers: false,\n    filled: false,\n    applied: false,\n    notify: false,\n    notice: \"\"\n  });\n\n  const handleInputChange = event => {\n    setData({ ...data,\n      notify: false,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const installment = () => {\n    let price = data.amount;\n    const intrest_rate = parseFloat(data.rate);\n    let val = parseInt(price) + parseInt(price * intrest_rate);\n    let time = parseInt(data.duration);\n    let repayDay = startDate.setDate(startDate.getDate() + time);\n\n    if (parseInt(data.amount) > 500 && parseInt(data.duration) > 5 && parseInt(data.amount) < 2001 && parseInt(data.duration) < 31) {\n      setData({ ...data,\n        amount_due: val,\n        interest: parseInt(price * intrest_rate),\n        repaymentDay: repayDay.toString(),\n        showNumbers: true\n      });\n    } else if (parseInt(data.amount) < 500) {\n      setData({\n        notify: true,\n        notice: \"Loan amount shouldn't be lower than R500\"\n      });\n    } else if (parseInt(data.duration) < 5) {\n      setData({\n        notify: true,\n        notice: \"Loan duration shouldn't be less than 5 days\"\n      });\n    } else if (parseInt(data.duration) > 30) {\n      setData({\n        notify: true,\n        notice: \"Loan duration shouldn't be longer than 30 days\"\n      });\n    } else if (parseInt(data.amount) > 2000) {\n      setData({\n        notify: true,\n        notice: \"Loan amount shouldn't be greater than R2000\"\n      });\n    } // console\n\n  };\n\n  const nextHandle = () => {\n    installment();\n  };\n\n  const loanSubmit = async e => {\n    e.preventDefault();\n    setData({\n      loading: true\n    });\n    await axios.post(`${URL}loan/create/${userId}`, {\n      \"amount\": data.amount,\n      \"duration\": data.duration,\n      \"repay_date\": startDate.toString(),\n      \"interest_rate\": data.rate,\n      \"apply_date\": applyDate.toString()\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(response => response.json()).then(() => {\n      setData({\n        applied: true,\n        loading: false\n      });\n    }).catch(error => {\n      setData({\n        loading: false\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.cnt_body,\n    children: data.applied ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.done,\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Done\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: data.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        style: {\n          margin: \"10rem\"\n        },\n        children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.row,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"How Much (ZAR)?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"Number\",\n              value: data.amount,\n              onChange: handleInputChange,\n              name: \"amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"How Long (Days)?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"Number\",\n              value: data.duration,\n              onChange: handleInputChange,\n              name: \"duration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: [/*#__PURE__*/_jsxDEV(RangeSlider, {\n            min: 0,\n            max: 2000,\n            step: 5,\n            name: \"amount\",\n            onChange: handleInputChange,\n            volume: data.amount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(RangeSlider, {\n            min: 0,\n            max: 30,\n            step: 1,\n            name: \"duration\",\n            onChange: handleInputChange,\n            volume: data.duration\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 37\n        }, this), data.notify ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: data.notice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 47\n        }, this) : \"\", data.showNumbers ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setData({\n              showNumbers: false\n            }),\n            className: \"btn-custom\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 49\n          }, this), props.profile ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Your loan application has been sent for review.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 61\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Please keep your eyes open for further confirmation on the results of your loan application\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 61\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Once approved, you will be notified with an Email and shortly, your R\", data.amount, \" will be paid into your bank account.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 61\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-custom\",\n              onClick: loanSubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 61\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 59\n          }, this) : /*#__PURE__*/_jsxDEV(Link, {\n            to: {\n              pathname: '/loan-application/',\n              state: {\n                amount_due: data.amount_due,\n                duration: data.duration,\n                amount: data.amount,\n                interest: data.interest,\n                rate: data.rate,\n                repaymentDay: startDate.toString()\n              }\n            },\n            className: \"btn-custom\",\n            children: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 59\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.numbers,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.col,\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"R\", data.amount_due]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Amount Due\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 53\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.col,\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: startDate.toDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Repay Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 53\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 47\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12 body-padding\",\n          children: [data.duration !== null && data.duration !== 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: nextHandle,\n            className: \"btn-custom\",\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 59\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Please enter desired amount and duration to pay loan.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 47\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 35\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 23\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Application, \"FlFYxXk5k9sn/Br4PTzyGnOL4Us=\", false, function () {\n  return [useAuth];\n});\n\n_c = Application;\nexport default Application;\n\nvar _c;\n\n$RefreshReg$(_c, \"Application\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Home/Header/Application/Application.js"],"names":["React","useState","Link","axios","classes","Input","RangeSlider","useAuth","baseURL","LoadingSpinner","URL","Application","props","token","userId","startDate","setStartDate","Date","applyDate","setApplyDate","data","setData","loading","repaymentDay","amount","duration","rate","amount_due","interest","showNumbers","filled","applied","notify","notice","handleInputChange","event","target","name","value","installment","price","intrest_rate","parseFloat","val","parseInt","time","repayDay","setDate","getDate","toString","nextHandle","loanSubmit","e","preventDefault","post","headers","then","response","json","catch","error","cnt_body","done","margin","row","profile","pathname","state","numbers","col","toDateString"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nimport classes from './Application.module.css';\nimport Input from '../../../../shared/components/UIElements/Input/Input';\nimport RangeSlider from '../../../../shared/components/UIElements/RangeSlider/RangeSlider';\nimport { useAuth } from '../../../../shared/hooks/auth-hook';\nimport { baseURL } from '../../../../URI.js';\nimport LoadingSpinner from '../../../../shared/components/UIElements/Spinner/LoadingSpinner';\n\nconst URL = baseURL;\n\nconst Application = (props) => {\n    const { token, userId } = useAuth();\n    const [startDate, setStartDate] = useState(new Date());\n    const [applyDate, setApplyDate] = useState(new Date());\n    const [data, setData] = useState({\n        loading: false,\n        repaymentDay: null,\n        startDate: new Date(),\n        amount: 1500,\n        duration: 14,\n        rate: 0.1,\n        amount_due: 0,\n        interest: 0,\n        showNumbers: false,\n        filled: false,\n        applied: false,\n        notify: false,\n        notice: \"\"\n    })\n    const handleInputChange = event => {\n        setData({\n            ...data,\n            notify: false,\n            [event.target.name]: event.target.value\n        });\n    };\n    const installment = () => {\n        let price = data.amount;\n        const intrest_rate = parseFloat(data.rate);\n        let val = (parseInt(price) + parseInt(price * intrest_rate));\n        let time = parseInt(data.duration);\n        let repayDay = startDate.setDate(startDate.getDate() + (time));\n        if ((parseInt(data.amount)) > 500 && (parseInt(data.duration)) > 5 && (parseInt(data.amount)) < 2001 && (parseInt(data.duration)) < 31) {\n            setData({\n                ...data,\n                amount_due: val,\n                interest: parseInt(price * intrest_rate),\n                repaymentDay: repayDay.toString(),\n                showNumbers: true\n            });\n        }\n        else if ((parseInt(data.amount)) < 500) {\n            setData({\n                notify: true,\n                notice: \"Loan amount shouldn't be lower than R500\"\n            })\n        }\n        else if ((parseInt(data.duration)) < 5) {\n            setData({\n                notify: true,\n                notice: \"Loan duration shouldn't be less than 5 days\"\n            })\n        }\n        else if ((parseInt(data.duration)) > 30) {\n            setData({\n                notify: true,\n                notice: \"Loan duration shouldn't be longer than 30 days\"\n            })\n        }\n        else if ((parseInt(data.amount)) > 2000) {\n            setData({\n                notify: true,\n                notice: \"Loan amount shouldn't be greater than R2000\"\n            })\n        }\n\n        // console\n    }\n    const nextHandle = () => {\n        installment();\n    }\n    const loanSubmit = async (e) => {\n        e.preventDefault();\n        setData({\n            loading: true\n        });\n        await axios\n            .post(`${URL}loan/create/${userId}`,\n                {\n                    \"amount\": data.amount,\n                    \"duration\": data.duration,\n                    \"repay_date\": startDate.toString(),\n                    \"interest_rate\": data.rate,\n                    \"apply_date\": applyDate.toString()\n                },\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${token}`\n                    }\n                }\n            )\n            .then(response => response.json()\n            )\n            .then(() => {\n                setData({\n                    applied: true,\n                    loading: false\n                });\n            })\n            .catch(error => {\n                setData({\n                    loading: false\n                });\n            });\n    };\n    return (\n        <div className={classes.cnt_body}>\n            {\n                data.applied\n                    ? <React.Fragment>\n                        <div className={classes.done}>\n                            <h2>Done</h2>\n                        </div>\n                    </React.Fragment>\n                    : <React.Fragment>\n                        {\n                            data.loading\n                                ? <div className='container' style={{\n                                    margin: \"10rem\"\n                                }}>\n                                    <LoadingSpinner />\n                                </div>\n                                : <React.Fragment>\n                                    <div className={classes.row}>\n                                        <div className='col-md-3'>\n                                            <label>How Much (ZAR)?</label>\n                                            <Input type={\"Number\"} value={data.amount} onChange={handleInputChange} name={\"amount\"} />\n                                        </div>\n                                        <div className='col-md-3'>\n                                            <label>How Long (Days)?</label>\n                                            <Input type={\"Number\"} value={data.duration} onChange={handleInputChange} name={\"duration\"} />\n                                        </div>\n                                    </div>\n                                    <div className='col-md-12'>\n                                        <RangeSlider min={0} max={2000} step={5} name={\"amount\"} onChange={handleInputChange} volume={data.amount} />\n                                        <RangeSlider min={0} max={30} step={1} name={\"duration\"} onChange={handleInputChange} volume={data.duration} />\n                                    </div>\n                                    {\n                                        data.notify\n                                            ? <div>\n                                                <h5>{data.notice}</h5>\n                                            </div>\n                                            : \"\"\n                                    }\n                                    {\n                                        data.showNumbers\n                                            ? <div>\n                                                <button onClick={() => (\n                                                    setData({\n                                                        showNumbers: false\n                                                    })\n                                                )} className='btn-custom'>Cancel</button>\n                                                <br />\n                                                <br />\n                                                {\n                                                    props.profile\n                                                        ? <div>\n                                                            <h3>Your loan application has been sent for review.</h3>\n                                                            <h4>Please keep your eyes open for further confirmation on the results of your loan application</h4>\n                                                            <h4>Once approved, you will be notified with an Email and shortly, your R{data.amount} will be paid into your bank account.</h4>\n                                                            <button className='btn-custom' onClick={loanSubmit}>\n                                                                Submit\n                                                            </button>\n                                                        </div>\n                                                        : <Link to={{\n                                                            pathname: '/loan-application/',\n                                                            state: {\n                                                                amount_due: data.amount_due,\n                                                                duration: data.duration,\n                                                                amount: data.amount,\n                                                                interest: data.interest,\n                                                                rate: data.rate,\n                                                                repaymentDay: startDate.toString()\n                                                            }\n                                                        }} className='btn-custom'>Continue</Link>\n                                                }\n                                                <div className={classes.numbers}>\n                                                    <div className={classes.col}>\n                                                        <h4>R{data.amount_due}</h4>\n                                                        <h5>Amount Due</h5>\n                                                    </div>\n                                                    <div className={classes.col}>\n                                                        <h4>{startDate.toDateString()}</h4>\n                                                        <h5>Repay Date</h5>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            : <div className='col-md-12 body-padding'>\n                                                {\n                                                    data.duration !== null && data.duration !== 0\n                                                        ? <button onClick={nextHandle} className='btn-custom'>Next</button>\n                                                        : \"\"\n                                                }\n\n                                                <p>Please enter desired amount and duration to pay loan.</p>\n                                            </div>\n                                    }\n                                </React.Fragment>\n                        }\n                    </React.Fragment>\n            }\n        </div>\n    )\n}\n\nexport default Application;"]},"metadata":{},"sourceType":"module"}