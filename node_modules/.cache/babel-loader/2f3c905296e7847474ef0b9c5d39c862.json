{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Finances.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport axios from 'axios';\nimport { Link } from \"react-router-dom\";\nimport Input from \"../../../shared/components/UIElements/Input/Input\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport LoadingSpinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = baseURL;\n\nconst Finances = props => {\n  _s();\n\n  const {\n    state\n  } = props.location;\n  const auth = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState({\n    gross_income: \"\",\n    net_income: \"\",\n    monthly_rates: \"\",\n    groceries: \"\",\n    commuting_costs: \"\",\n    loan_repayments: \"\",\n    child_maintenance: \"\",\n    desp_income: \"\",\n    errorMessage: \"\"\n  });\n\n  const handleInputChange = event => {\n    setData({ ...data,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    await axios.post(`${URL}finances/create/${auth.userId}`, {\n      \"monthly_rates\": \"R10000\",\n      \"groceries\": \"R2000\",\n      \"commuting_costs\": \"R400\",\n      \"loan_repayments\": \"R20\",\n      \"child_maintenance\": \"R0\",\n      \"desp_income\": \"R7600\"\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${auth.token}`\n      }\n    }).then(response => {\n      setLoading(false);\n      setDone(true);\n      response.json();\n    }).catch(error => {\n      setLoading(false);\n\n      if (error.response) {\n        const str = error.response.data.error;\n        const errMes = str.split(':').pop();\n        setError(true);\n        setData({ ...data,\n          errorMessage: errMes\n        });\n      } else {}\n    });\n  };\n\n  const errorDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: data.errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `/loan-finances/${auth.userId}`,\n      className: \"btn-custom\",\n      children: \"Try again \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/auth\",\n      className: \"btn-custom\",\n      children: \"Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n\n  const loadingDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n\n  const doneDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your information was successfully saved, please continue on to the next section\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: `/loan-bank/${auth.userId}`,\n        state: {\n          amount_due: state.amount_due,\n          duration: state.duration,\n          amount: state.amount,\n          interest: state.interest,\n          rate: state.rate,\n          repaymentDay: state.repaymentDay\n        }\n      },\n      className: 'btn-custom',\n      children: \"Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n\n  const financesDIv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Monthly Finances\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please fill in the following form with your information.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Loan Duration: \", state.duration, \" days\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Repayment Date: \", state.repaymentDay]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Amount Due: R\", state.amount_due]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n      width: \"60%\",\n      step: \"5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.gross_income,\n      type: \"text\",\n      disabled: true,\n      name: \"gross_income\",\n      placeholder: \"Gross Monthly Income (After Tax)\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.net_income,\n      type: \"Number\",\n      disabled: true,\n      name: \"net_income\",\n      placeholder: \"Net Monthly Income (After Tax)\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.monthly_rates,\n      type: \"Number\",\n      name: \"monthly_rates\",\n      placeholder: \"Monthly rent rates and taxes (exclude bond repayment)\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.groceries,\n      type: \"Number\",\n      name: \"groceries\",\n      placeholder: \"Monthly groceries and household goods\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.commuting_costs,\n      type: \"Number\",\n      name: \"commuting_costs\",\n      placeholder: \"Monthly commuting costs (exclude car repayment)\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.loan_repayments,\n      type: \"Number\",\n      name: \"loan_repayments\",\n      placeholder: \"Monthly loan repayments\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.child_maintenance,\n      type: \"Number\",\n      name: \"child_maintenance\",\n      placeholder: \"Monthly child maintanence\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.desp_income,\n      type: \"Number\",\n      name: \"desp_income\",\n      placeholder: \"Calculated disposable income\",\n      disabled: true,\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btns\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        className: \"btn-custom-neg\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        className: \"btn-custom\",\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [!loading && !done && !error && financesDIv, loading && loadingDiv, done && doneDiv, error && errorDiv]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Finances, \"3iId8ed79oDfSXseJFDpmtmoQlM=\");\n\n_c = Finances;\nexport default Finances;\n\nvar _c;\n\n$RefreshReg$(_c, \"Finances\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Finances.js"],"names":["React","useContext","useState","axios","Link","Input","ProgressBar","LoadingSpinner","baseURL","AuthContext","URL","Finances","props","state","location","auth","loading","setLoading","done","setDone","error","setError","data","setData","gross_income","net_income","monthly_rates","groceries","commuting_costs","loan_repayments","child_maintenance","desp_income","errorMessage","handleInputChange","event","target","name","value","handleSubmit","e","preventDefault","post","userId","headers","token","then","response","json","catch","str","errMes","split","pop","errorDiv","margin","loadingDiv","doneDiv","pathname","amount_due","duration","amount","interest","rate","repaymentDay","financesDIv"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from 'axios';\nimport { Link } from \"react-router-dom\";\n\nimport Input from \"../../../shared/components/UIElements/Input/Input\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport LoadingSpinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\n\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\n\nconst URL = baseURL;\n\nconst Finances = (props) => {\n    const { state } = props.location;\n    const auth = useContext(AuthContext);\n    const [loading, setLoading] = useState(false);\n    const [done, setDone] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState({\n        gross_income: \"\",\n        net_income: \"\",\n        monthly_rates: \"\",\n        groceries: \"\",\n        commuting_costs: \"\",\n        loan_repayments: \"\",\n        child_maintenance: \"\",\n        desp_income: \"\",\n        errorMessage: \"\"\n    });\n    const handleInputChange = event => {\n        setData({\n            ...data,\n            [event.target.name]: event.target.value\n        });\n    };\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        await axios\n            .post(`${URL}finances/create/${auth.userId}`,\n                {\n                    \"monthly_rates\": \"R10000\",\n                    \"groceries\": \"R2000\",\n                    \"commuting_costs\": \"R400\",\n                    \"loan_repayments\": \"R20\",\n                    \"child_maintenance\": \"R0\",\n                    \"desp_income\": \"R7600\"\n                },\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${auth.token}`\n                    }\n                }\n            )\n            .then(response => {\n                setLoading(false);\n                setDone(true);\n                response.json();\n            })\n            .catch(error => {\n                setLoading(false);\n                if (error.response) {\n                    const str = error.response.data.error;\n                    const errMes = str.split(':').pop();\n                    setError(true);\n                    setData({\n                        ...data,\n                        errorMessage: errMes\n                    });\n                }\n                else {\n\n                }\n            })\n    }\n\n    const errorDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Error</h1>\n            <h2>{data.errorMessage}</h2>\n            <a href={`/loan-finances/${auth.userId}`} className='btn-custom' >Try again </a>\n            <a href='/auth' className=\"btn-custom\" >Log in</a>\n        </div>\n    );\n    const loadingDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <LoadingSpinner />\n        </div>\n    );\n    const doneDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Your information was successfully saved, please continue on to the next section</h1>\n            <Link to={{\n                pathname: `/loan-bank/${auth.userId}`,\n                state: {\n                    amount_due: state.amount_due,\n                    duration: state.duration,\n                    amount: state.amount,\n                    interest: state.interest,\n                    rate: state.rate,\n                    repaymentDay: state.repaymentDay\n                }\n            }} className={'btn-custom'}>Continue</Link>\n        </div>\n    );\n    const financesDIv = (\n        <div className=\"body-padding\">\n            <h2>Monthly Finances</h2>\n            <p>Please fill in the following form with your information.</p>\n            <h3>Loan Duration: {state.duration} days</h3>\n            <h3>Repayment Date: {state.repaymentDay}</h3>\n            <h3>Amount Due: R{state.amount_due}</h3>\n            <ProgressBar width='60%' step='5' />\n            <Input value={data.gross_income} type='text' disabled={true} name='gross_income' placeholder='Gross Monthly Income (After Tax)' onChange={handleInputChange} />\n            <Input value={data.net_income} type='Number' disabled={true} name='net_income' placeholder='Net Monthly Income (After Tax)' onChange={handleInputChange} />\n            <Input value={data.monthly_rates} type='Number' name='monthly_rates' placeholder=\"Monthly rent rates and taxes (exclude bond repayment)\" onChange={handleInputChange} />\n            <Input value={data.groceries} type='Number' name='groceries' placeholder=\"Monthly groceries and household goods\" onChange={handleInputChange} />\n            <Input value={data.commuting_costs} type='Number' name='commuting_costs' placeholder=\"Monthly commuting costs (exclude car repayment)\" onChange={handleInputChange} />\n            <Input value={data.loan_repayments} type='Number' name='loan_repayments' placeholder=\"Monthly loan repayments\" onChange={handleInputChange} />\n            <Input value={data.child_maintenance} type='Number' name='child_maintenance' placeholder=\"Monthly child maintanence\" onChange={handleInputChange} />\n            <Input value={data.desp_income} type='Number' name='desp_income' placeholder=\"Calculated disposable income\" disabled={true} onChange={handleInputChange} />\n            <div className='btns'>\n                <a href='/' className='btn-custom-neg'>Cancel</a>\n                <button onClick={handleSubmit} className='btn-custom'>Next</button>\n            </div>\n        </div>\n    )\n    return (\n        <div className='container'>\n            {!loading && !done && !error && financesDIv}\n            {loading && loadingDiv}\n            {done && doneDiv}\n            {error && errorDiv}\n        </div>\n    )\n}\n\nexport default Finances;"]},"metadata":{},"sourceType":"module"}