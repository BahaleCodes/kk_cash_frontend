{"ast":null,"code":"var _jsxFileName = \"/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Bank.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"../../../shared/components/UIElements/Input/Input\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport SelectBox from \"../../../shared/components/UIElements/SelectBox/SelectBox\";\nimport LoadingSpinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = baseURL;\n\nconst Bank = props => {\n  _s();\n\n  const {\n    state\n  } = props.location;\n  const auth = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState({\n    bank_name: \"\",\n    other_bank: \"\",\n    acc_type: \"\",\n    other_acc_type: \"\",\n    branch_code: \"\",\n    acc_holder: \"\",\n    errorMessage: \"\"\n  });\n\n  const handleInputChange = event => {\n    setData({ ...data,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    await axios.post(`${URL}bank/create/${auth.userId}`, {\n      \"bank_name\": \"ABSA\",\n      \"acc_num\": \"987654321012\",\n      \"acc_type\": \"Savings\",\n      \"branch_num\": \"234567\",\n      \"acc_holder\": \"Thabo Mponya\"\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${auth.token}`\n      }\n    }).then(response => {\n      setLoading(false);\n      setDone(true);\n      response.json();\n    }).catch(error => {\n      setLoading(false);\n\n      if (error.response) {\n        const str = error.response.data.error;\n        const errMes = str.split(':').pop();\n        setError(true);\n        setData({ ...data,\n          errorMessage: errMes\n        });\n      } else {}\n    });\n  };\n\n  const errorDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: data.errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      href: `/loan-bank/${auth.userId}`,\n      className: \"btn-custom\",\n      children: \"Try again \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/auth\",\n      className: \"btn-custom\",\n      children: \"Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n\n  const loadingDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n\n  const doneDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding text-center\",\n    style: {\n      margin: \"10rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your information was successfully saved, please continue on to the next section\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: `/loan-apply/${auth.userId}`,\n        state: {\n          amount_due: state.amount_due,\n          duration: state.duration,\n          amount: state.amount,\n          interest: state.interest,\n          rate: state.rate,\n          repaymentDay: state.repaymentDay\n        }\n      },\n      className: 'btn-custom',\n      children: \"Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n\n  const bankDiv = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-padding\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Bank Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please fill in the following form with your information.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Loan Duration: \", state.duration, \" days\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Repayment Date: \", state.repaymentDay]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Amount Due: R\", state.amount_due]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n      width: \"90%\",\n      step: \"6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SelectBox, {\n      value: data.bank_name,\n      name: \"bank_name\",\n      placeholder: \"Bank Name\",\n      onChange: handleInputChange,\n      questions: [\"Standard Bank\", \"FirstRand\", \"Absa\", \"Nedband\", \"Investec\", \"Capitec\", \"Discovery bank\", \"TymeBank\", \"Other\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), data.bank_name === \"Other\" ? /*#__PURE__*/_jsxDEV(Input, {\n      value: data.other_bank,\n      name: \"other_bank\",\n      placeholder: \"Your Bank Name\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 23\n    }, this) : '', /*#__PURE__*/_jsxDEV(Input, {\n      value: data.acc_num,\n      name: \"acc_num\",\n      type: \"Number\",\n      placeholder: \"Account Number\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SelectBox, {\n      value: data.acc_type,\n      name: \"acc_type\",\n      placeholder: \"Account Type\",\n      onChange: handleInputChange,\n      questions: [\"Cheque\", \"Savings\", \"Other\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), data.acc_type === \"Other\" ? /*#__PURE__*/_jsxDEV(Input, {\n      value: data.other_acc_type,\n      name: \"other_acc_type\",\n      placeholder: \"Your Account Type\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }, this) : '', /*#__PURE__*/_jsxDEV(Input, {\n      value: data.branch_code,\n      name: \"branch_code\",\n      placeholder: \"Branch Code\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: data.acc_holder,\n      name: \"acc_holder\",\n      placeholder: \"Account holder\",\n      onChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btns\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: '/',\n        className: \"btn-custom-neg\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        className: \"btn-custom\",\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [!loading && !done && !error && bankDiv, loading && loadingDiv, done && doneDiv, error && errorDiv]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Bank, \"olPw27QSgeMaeNHpHapcoQ6rZao=\");\n\n_c = Bank;\nexport default Bank;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bank\");","map":{"version":3,"sources":["/Users/thabomponya/Documents/GitHub/kkCash/client/src/screens/Loan/pages/Bank.js"],"names":["React","useContext","useState","axios","Link","Input","ProgressBar","SelectBox","LoadingSpinner","baseURL","AuthContext","URL","Bank","props","state","location","auth","loading","setLoading","done","setDone","error","setError","data","setData","bank_name","other_bank","acc_type","other_acc_type","branch_code","acc_holder","errorMessage","handleInputChange","event","target","name","value","handleSubmit","e","preventDefault","post","userId","headers","token","then","response","json","catch","str","errMes","split","pop","errorDiv","margin","loadingDiv","doneDiv","pathname","amount_due","duration","amount","interest","rate","repaymentDay","bankDiv","acc_num"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport Input from \"../../../shared/components/UIElements/Input/Input\";\nimport ProgressBar from \"../../../shared/components/UIElements/ProgressBar/ProgressBar\";\nimport SelectBox from \"../../../shared/components/UIElements/SelectBox/SelectBox\";\nimport LoadingSpinner from \"../../../shared/components/UIElements/Spinner/LoadingSpinner\";\n\nimport { baseURL } from \"../../../URI\";\nimport { AuthContext } from \"../../../shared/context/auth-context\";\n\nconst URL = baseURL;\n\nconst Bank = (props) => {\n    const { state } = props.location;\n    const auth = useContext(AuthContext);\n    const [loading, setLoading] = useState(false);\n    const [done, setDone] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState({\n        bank_name: \"\",\n        other_bank: \"\",\n        acc_type: \"\",\n        other_acc_type: \"\",\n        branch_code: \"\",\n        acc_holder: \"\",\n        errorMessage: \"\"\n    });\n    const handleInputChange = event => {\n        setData({\n            ...data,\n            [event.target.name]: event.target.value\n        });\n    };\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        await axios\n            .post(`${URL}bank/create/${auth.userId}`,\n                {\n                    \"bank_name\": \"ABSA\",\n                    \"acc_num\": \"987654321012\",\n                    \"acc_type\": \"Savings\",\n                    \"branch_num\": \"234567\",\n                    \"acc_holder\": \"Thabo Mponya\"\n                },\n                {\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": `Bearer ${auth.token}`\n                    }\n                }\n            )\n            .then(response => {\n                setLoading(false);\n                setDone(true);\n                response.json();\n            })\n            .catch(error => {\n                setLoading(false);\n                if (error.response) {\n                    const str = error.response.data.error;\n                    const errMes = str.split(':').pop();\n                    setError(true);\n                    setData({\n                        ...data,\n                        errorMessage: errMes\n                    });\n                }\n                else {\n\n                }\n            })\n    }\n\n    const errorDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Error</h1>\n            <h2>{data.errorMessage}</h2>\n            <Link href={`/loan-bank/${auth.userId}`} className='btn-custom' >Try again </Link>\n            <a href='/auth' className=\"btn-custom\" >Log in</a>\n        </div>\n    );\n    const loadingDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <LoadingSpinner />\n        </div>\n    );\n    const doneDiv = (\n        <div className='body-padding text-center' style={{ margin: \"10rem\" }}>\n            <h1>Your information was successfully saved, please continue on to the next section</h1>\n            <Link to={{\n                pathname: `/loan-apply/${auth.userId}`,\n                state: {\n                    amount_due: state.amount_due,\n                    duration: state.duration,\n                    amount: state.amount,\n                    interest: state.interest,\n                    rate: state.rate,\n                    repaymentDay: state.repaymentDay\n                }\n            }} className={'btn-custom'}>Continue</Link>\n        </div>\n    );\n    const bankDiv = (\n        <div className=\"body-padding\" >\n            <h2>Bank Details</h2>\n            <p>Please fill in the following form with your information.</p>\n            <h3>Loan Duration: {state.duration} days</h3>\n            <h3>Repayment Date: {state.repaymentDay}</h3>\n            <h3>Amount Due: R{state.amount_due}</h3>\n            <ProgressBar width='90%' step='6' />\n            <SelectBox value={data.bank_name} name='bank_name' placeholder='Bank Name' onChange={handleInputChange} questions={[\n                \"Standard Bank\",\n                \"FirstRand\",\n                \"Absa\",\n                \"Nedband\",\n                \"Investec\",\n                \"Capitec\",\n                \"Discovery bank\",\n                \"TymeBank\",\n                \"Other\"\n            ]} />\n            {\n                data.bank_name === \"Other\"\n                    ? <Input value={data.other_bank} name='other_bank' placeholder='Your Bank Name' onChange={handleInputChange} />\n                    : ''\n            }\n            <Input value={data.acc_num} name='acc_num' type='Number' placeholder='Account Number' onChange={handleInputChange} />\n            <SelectBox value={data.acc_type} name='acc_type' placeholder='Account Type' onChange={handleInputChange} questions={[\n                \"Cheque\",\n                \"Savings\",\n                \"Other\"\n            ]} />\n            {\n                data.acc_type === \"Other\"\n                    ? <Input value={data.other_acc_type} name='other_acc_type' placeholder='Your Account Type' onChange={handleInputChange} />\n                    : ''\n            }\n            <Input value={data.branch_code} name='branch_code' placeholder='Branch Code' onChange={handleInputChange} />\n            <Input value={data.acc_holder} name='acc_holder' placeholder='Account holder' onChange={handleInputChange} />\n            <div className='btns'>\n                <Link to={'/'} className='btn-custom-neg'>Cancel</Link>\n                <button onClick={handleSubmit} className='btn-custom'>Next</button>\n            </div>\n        </div>\n    )\n    return (\n        <div className='container'>\n            {!loading && !done && !error && bankDiv}\n            {loading && loadingDiv}\n            {done && doneDiv}\n            {error && errorDiv}\n        </div>\n    )\n}\n\nexport default Bank;"]},"metadata":{},"sourceType":"module"}